<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-10 flex flex-col items-center">
    <div class="max-w-4xl mx-auto bg-white p-6 rounded-lg shadow-md text-center">
        <h1 class="text-2xl font-bold mb-4">24-Hour To-Do List</h1>
        <button id="addTask" class="mb-4 px-4 py-2 bg-blue-500 text-white rounded">ADD TASK</button>
        <div id="taskList" class="space-y-4">
            <!-- Time Blocks will be added dynamically -->
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const taskList = document.getElementById("taskList");
            const addTaskButton = document.getElementById("addTask");
            
            function formatTime(hour, minute) {
                let period = hour < 12 ? "AM" : "PM";
                let displayHour = hour % 12 || 12;
                let nextHour = (hour + (minute + 30) / 60) % 24;
                let nextMinute = (minute + 30) % 60;
                let displayNextHour = nextHour % 12 || 12;
                let nextPeriod = nextHour < 12 ? "AM" : "PM";
                return `${displayHour}:${minute.toString().padStart(2, '0')} ${period} - ${displayNextHour}:${nextMinute.toString().padStart(2, '0')} ${nextPeriod}`;
            }
            
            for (let h = 5; h < 24 + 5; h++) {
                let hour = h % 24;
                for (let m = 30; m < 60; m += 30) {
                    let timeSlot = formatTime(hour, m % 60);
                    let taskBlock = document.createElement("div");
                    taskBlock.classList.add("p-4", "border", "rounded", "bg-gray-50", "text-center");
                    taskBlock.innerHTML = `
                        <div class="flex items-center justify-center space-x-4">
                            <input type="checkbox" class="toggleTask w-5 h-5"/>
                            <span class="font-semibold">${timeSlot}</span>
                            <input type="checkbox" class="missedTask w-5 h-5"/>
                        </div>
                        <textarea class="taskInput w-full mt-2 p-2 border rounded hidden text-center" placeholder="Add task..."></textarea>
                        <p class="taskText mt-2 text-center"></p>
                    `;
                    taskList.appendChild(taskBlock);
                }
            }
            
            addTaskButton.addEventListener("click", () => {
                document.querySelectorAll(".taskInput").forEach(input => {
                    input.classList.remove("hidden");
                    input.focus();
                });
            });
            
            taskList.addEventListener("click", (event) => {
                if (event.target.classList.contains("toggleTask")) {
                    let parent = event.target.closest("div").parentNode;
                    parent.classList.toggle("bg-green-200");
                    parent.querySelector(".taskText").classList.toggle("line-through");
                    parent.querySelector("span").classList.toggle("line-through");
                }
                if (event.target.classList.contains("missedTask")) {
                    let parent = event.target.closest("div").parentNode;
                    parent.classList.toggle("bg-red-200");
                }
            });
            
            taskList.addEventListener("input", (event) => {
                if (event.target.classList.contains("taskInput")) {
                    let textArea = event.target;
                    let text = textArea.value;
                    let taskText = textArea.nextElementSibling;
                    taskText.textContent = text;
                }
            });
            
            taskList.addEventListener("focusout", (event) => {
                if (event.target.classList.contains("taskInput")) {
                    let textArea = event.target;
                    if (textArea.value.trim() !== "") {
                        textArea.classList.add("hidden");
                    }
                }
            });
        });
    </script>
</body>
</html>
